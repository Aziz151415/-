<!DOCTYPE html>
<html lang="ar">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="القرآن الكريم - Al-Quran Al-Kareem | Read & Listen to the Quran">
    <meta name="keywords" content="القرآن الكريم, Al-Quran, Nafahat Al-Iman">
    <meta name="author" content="Abdulaziz Alharbi">
    <meta name="description" content="An in-depth look at modern web development practices.">
    <meta name="keywords" content="web development, SEO, PWA, responsive design">
    <title>القرآن الكريم - Al-Quran Al-Kareem | Nafahat Al-Iman</title>
    <link rel="stylesheet" href="project styles.css">
    <link rel="manifest" href="manifest.json">
    <script>
        async function fetchPrayerTimes(latitude, longitude) {
            const response = await fetch(`https://api.aladhan.com/v1/timings?latitude=${latitude}&longitude=${longitude}&method=2`);
            const data = await response.json();
            const timings = data.data.timings;

            const optionsArabic = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', numberingSystem: 'arab' };
            const optionsEnglish = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            const gregorianDateArabic = new Date().toLocaleDateString('ar-EG', optionsArabic);
            const gregorianDateEnglish = new Date().toLocaleDateString('en-US', optionsEnglish);
            const hijriDate = data.data.date.hijri.date;

            document.getElementById('fajr-time').textContent = timings.Fajr;
            document.getElementById('dhuhr-time').textContent = timings.Dhuhr;
            document.getElementById('asr-time').textContent = timings.Asr;
            document.getElementById('maghrib-time').textContent = timings.Maghrib;
            document.getElementById('isha-time').textContent = timings.Isha;
            document.getElementById('sunrise-time').textContent = timings.Sunrise;
            document.getElementById('sunset-time').textContent = timings.Sunset;

            document.getElementById('current-date').textContent = `التاريخ الميلادي: ${gregorianDateArabic} | ${gregorianDateEnglish} | التاريخ الهجري: ${hijriDate}`;

            const geocodingResponse = await fetch(`https://api.opencagedata.com/geocode/v1/json?q=${latitude}+${longitude}&key=YOUR_OPENCAGE_API_KEY&language=ar`);
            const geocodingData = await geocodingResponse.json();
            const city = geocodingData.results[0].components.city || geocodingData.results[0].components.town || geocodingData.results[0].components.village;

            document.getElementById('city-name').textContent = `المدينة: ${city}`;
        }

        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(position => {
                    const latitude = position.coords.latitude;
                    const longitude = position.coords.longitude;
                    fetchPrayerTimes(latitude, longitude);
                }, error => {
                    alert("Error getting location: " + error.message);
                });
            } else {
                alert("Geolocation is not supported by this browser.");
            }
        }

        window.onload = getLocation;
    </script>
</head>

<body>
    <header>
        <div class="header">
            <div class="header__title">
                <h1>القرآن الكريم - Al-Quran Al-Kareem</h1>
                <h2>Welcome to Nafahat Al-Iman</h2>
            </div>
        </div>
    </header>

    <section class="buttons">
        <button onclick="window.location.href='alsabah athkar.html'">أذكار الصباح<br>Morning Athkar</button>
        <button onclick="window.location.href='Almasa athkar.html'">أذكار المساء<br>Evening Athkar</button>
        <button onclick="window.location.href='https://quran.com/'">قراءة القرآن<br>Read the Quran</button>
        <button onclick="window.location.href='https://quranicaudio.com/'">الاستماع إلى القرآن<br>Listen to the
            Quran</button>
        <button onclick="window.location.href='https://www.mp3quran.net/'">تحميل القرآن<br>Download the
            Quran</button>
    </section>

    <section class="prayer-times" id="prayer-times">
        <h3>Prayer Times – أوقات الصلاة</h3>
        <p id="city-name">المدينة: تحديد الموقع...</p>
        <p>Sunrise: <span id="sunrise-time">Loading…</span></p>
        <p>Sunset: <span id="sunset-time">Loading…</span></p>
        <p id="current-date">Loading date...</p>
        <p>الفجر – Fajr: <span id="fajr-time">Loading…</span></p>
        <p>الظهر – Dhuhr: <span id="dhuhr-time">Loading…</span></p>
        <p>العصر – Asr: <span id="asr-time">Loading…</span></p>
        <p>المغرب – Maghrib: <span id="maghrib-time">Loading…</span></p>
        <p>العشاء – Isha: <span id="isha-time">Loading…</span></p>
    </section>

    <footer>
        <p>&copy; 2024 القرآن الكريم - Al-Quran Al-Kareem | Nafahat Al-Iman</p>
        <p style="font-family: Arial, sans-serif; font-style: italic;">Abdulaziz</p>
        <button onclick="window.location.href='mailto:abdulaziz.h1407@gmail.com'"
            style="background-color: #82c0e9bc; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">
            Contact
        </button>
    </footer>

    <!-- Register the service worker -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function () {
                navigator.serviceWorker.register('/service-worker.js').then(function (registration) {
                    console.log('ServiceWorker registration successful with scope: ', registration.scope);
                }, function (err) {
                    console.log('ServiceWorker registration failed: ', err);
                });
            });
        }
    </script>

    </script>
</body>

</html>